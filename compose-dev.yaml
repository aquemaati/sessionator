version: '3.8'

services:
  app:
    image: golang:1.22.4  # Remplacez par la version spécifique que vous souhaitez utiliser
    container_name: go_dev_container
    init: true
    volumes:
      - .:/go/src/app  # Monte le répertoire de votre projet dans le conteneur
      - /var/run/docker.sock:/var/run/docker.sock
    working_dir: /go/src/app
    entrypoint: ["sh", "-c", "while :; do sleep 2073600; done"]  # Maintient le conteneur en fonctionnement
    ports:
      - "8080:8080"  # Expose le port de l'application
    environment:
      - GO111MODULE=on  # Active les modules Go
      - CGO_ENABLED=0  # Désactive CGO pour simplifier la compilation croisée

  redis:
    image: redis:alpine
    ports:
      - "6379:6379"
